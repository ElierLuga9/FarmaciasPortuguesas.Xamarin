<<<<<<< HEAD
﻿<?xml version="1.0" encoding="UTF-8"?>
<pages:ANFPage
		xmlns:pages="clr-namespace:ANFAPP.Pages;assembly=ANFAPP"
	xmlns="http://xamarin.com/schemas/2014/forms"
	xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
	xmlns:resources="clr-namespace:ANFAPP.Logic.Resources;assembly=ANFAPP.Logic"
	xmlns:common="clr-namespace:ANFAPP.Views.Common;assembly=ANFAPP"
	xmlns:views="clr-namespace:ANFAPP.Views;assembly=ANFAPP"
	xmlns:converters="clr-namespace:ANFAPP.Resources;assembly=ANFAPP"
	xmlns:app="clr-namespace:ANFAPP.Logic;assembly=ANFAPP.Logic"
	x:Class="ANFAPP.Pages.PharmacyLocator.LocatorMap">
	<Grid
		RowSpacing="0"
		ColumnSpacing="0"
		BackgroundColor="{x:Static resources:ColorResources.LocatorBackgroundGrey}">
		<Grid.RowDefinitions>
			<RowDefinition
				Height="auto" />
			<RowDefinition
				Height="auto" />
			<RowDefinition
				Height="*" />
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition
				Width="auto" />
			<ColumnDefinition
				Width="*" />
		</Grid.ColumnDefinitions>
		<!--- Search bar -->
		<Grid
			Grid.Row="1"
			Grid.Column="1"
			Grid.RowSpacing="0"
			Grid.ColumnSpacing="0">
			<Grid.RowDefinitions>
				<RowDefinition
					Height="50" />
			</Grid.RowDefinitions>
			<Grid.ColumnDefinitions>
				<ColumnDefinition
					Width="15" />
				<ColumnDefinition
					Width="*" />
				<ColumnDefinition
					Width="70" />
			</Grid.ColumnDefinitions>
			<!--- Textbox -->
			<ContentView
				Grid.Row="0"
				Grid.Column="1"
				x:Name="GridSearch"
				IsVisible="false">
				<common:CustomEntry
					x:Name="SearchEntry"
					VerticalOptions="CenterAndExpand"
					HorizontalOptions="FillAndExpand"
					FontSize="15"
					TextChanged="OnTextChanged"
					Completed="OnSearchEntryCompleted"
					CustomFont="{x:Static resources:FontResources.RegularFont}"
					TextColor="{x:Static resources:ColorResources.TextColorDark}"
					BackgroundColor="{x:Static resources:ColorResources.LocatorBackgroundGrey}" />
			</ContentView>
			<!--- Toggle map/list -->
			<StackLayout
				x:Name="GridSelection"
				Grid.Row="0"
				Grid.Column="1"
				IsVisible="true"
				Spacing="10"
				Orientation="Horizontal"
				HorizontalOptions="Start"
				BackgroundColor="Transparent"
				VerticalOptions="FillAndExpand">
				<ContentView.GestureRecognizers>
					<TapGestureRecognizer
						Tapped="TogglerViewTypeAction" />
				</ContentView.GestureRecognizers>
				<common:CustomLabel
					Text="{x:Static app:AppResources.MapSwitchOption}"
					YAlign="Center"
					VerticalOptions="Center"
					CustomFont="{x:Static resources:FontResources.RegularFont}"
					TextColor="{x:Static resources:ColorResources.TextColorDark}"
					FontSize="15" />
				<common:Toggler
					x:Name="BtnTogglerViewType"
					HorizontalOptions="Center"
					VerticalOptions="Center"
					InputTransparent="True"
					WidthRequest="46"
					HeightRequest="28" />
				<common:CustomLabel
					Text="{x:Static app:AppResources.RecentSwitchOption}"
					YAlign="Center"
					VerticalOptions="Center"
					CustomFont="{x:Static resources:FontResources.RegularFont}"
					TextColor="{x:Static resources:ColorResources.TextColorDark}"
					FontSize="15" />
			</StackLayout>
			<!-- Search Button/Image -->
			<ContentView
				Grid.Row="0"
				Grid.Column="2"
				Padding="0, 0, 15, 0"
				VerticalOptions="FillAndExpand"
				HorizontalOptions="FillAndExpand">
				<common:CustomImage
					x:Name="SearchBarButtonImage"
					Source="ic_product_mag_search"
					VerticalOptions="Center"
					HorizontalOptions="End" />
				<ContentView.GestureRecognizers>
					<TapGestureRecognizer
						Tapped="ActionSearch" />
				</ContentView.GestureRecognizers>
			</ContentView>
		</Grid>
		<!-- This wraps the menu overlays, the map/list and the toggle at the bottom. -->
		<AbsoluteLayout
			Grid.Row="2"
			Grid.Column="1"
			x:Name="Wrapper"
			VerticalOptions="FillAndExpand"
			HorizontalOptions="FillAndExpand">
			<!-- Map, List and Toggle -->
			<Grid
				AbsoluteLayout.LayoutBounds="0, 0, 1.0, 1.0"
				AbsoluteLayout.LayoutFlags="All"
				RowSpacing="0"
				Padding="0">
				<Grid.RowDefinitions>
					<RowDefinition
						Height="44" />
					<RowDefinition
						Height="*"
						x:Name="RowMapListHeight" />
					<RowDefinition
						Height="auto" />
				</Grid.RowDefinitions>
				<!--- Page body map -->
				<Grid
					Grid.Row="1"
					x:Name="MapView"
					IsVisible="true"
					HorizontalOptions="FillAndExpand"
					VerticalOptions="FillAndExpand">
					<common:NativeMap
						x:Name="PharmacyMap"
						HorizontalOptions="FillAndExpand"
						VerticalOptions="FillAndExpand" />
				</Grid>
				<!-- The first row should remain empty! -->
				<!--- Page body list-->
				<Grid
					Grid.Row="1"
					x:Name="PharmacyListContainer"
					IsVisible="false"
					BackgroundColor="White"
					VerticalOptions="FillAndExpand"
					RowSpacing="0">
					<Grid.RowDefinitions>
						<RowDefinition
							Height="Auto">
						</RowDefinition>
						<RowDefinition
							Height="Auto">
						</RowDefinition>
						<RowDefinition
							Height="1*">
						</RowDefinition>
					</Grid.RowDefinitions>
					<Grid
						Grid.Row="0"
						HorizontalOptions="FillAndExpand"
						x:Name="containerInServiceVsLongSchedule"
						MinimumHeightRequest="40"
						BackgroundColor="{x:Static resources:ColorResources.LocatorBackgroundGrey}"
						ColumnSpacing="0"
						RowSpacing="0"
						IsVisible="False"
						Padding="0">
						<Grid.RowDefinitions>
							<RowDefinition
								Height="40">
							</RowDefinition>
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition
								Width="*">
							</ColumnDefinition>
							<ColumnDefinition
								Width="*">
							</ColumnDefinition>
						</Grid.ColumnDefinitions>
						<common:CustomButton
							HorizontalOptions="FillAndExpand"
							FontSize="15"
							Grid.Row="0"
							Grid.Column="0"
							BorderRadius="0"
							Text="{x:Static app:AppResources.InService}"
							x:Name="btnShowInServicePharms"
							TextColor="{x:Static resources:ColorResources.TextColorDark}"
							CustomFont="{x:Static resources:FontResources.RegularFont}"
							BackgroundColor="White" />
						<common:CustomButton
							HorizontalOptions="FillAndExpand"
							FontSize="15"
							Grid.Row="0"
							Grid.Column="1"
							BorderRadius="0"
							Text="{x:Static app:AppResources.LongHourSchedule}"
							x:Name="btnShowLongSchedulePharms"
							TextColor="{x:Static resources:ColorResources.TextColorDark}"
							CustomFont="{x:Static resources:FontResources.RegularFont}"
							BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
					</Grid>
					<!-- No Data Label -->
					<common:CustomLabel
						Grid.Row="1"
						FontSize="15"
						XAlign="Center"
						VerticalOptions="Start"
						HorizontalOptions="Center"
						CustomMargin="0, 20"
						TextColor="{x:Static resources:ColorResources.TextColorDark}"
						CustomFont="{x:Static resources:FontResources.SemiBoldFont}"
						Text="{x:Static app:AppResources.LocatorMapEmptyListLabel}"
						IsVisible="{Binding ListHasItems, Converter={x:Static converters:ConverterResources.InverseBool}}" />
					<common:CustomListView
						x:Name="PharmacyList"
						
						ItemSelected="DidSelectPharmacyItem"
						SeparatorColor="White"
						Grid.Row="2"
						VerticalOptions="FillAndExpand"
						HasUnevenRows="True">
						<common:CustomListView.ItemTemplate>
							<DataTemplate>
								<ViewCell>
									<StackLayout
										Orientation="Vertical"
										Spacing="0">
										<Grid
											Padding="0"
											BackgroundColor="White">
											<Grid.RowDefinitions>
												<!-- Margin -->
												<RowDefinition
													Height="2" />
												<!-- ? -->
												<RowDefinition
													Height="auto" />
												<!-- Margin -->
												<RowDefinition
													Height="2" />
											</Grid.RowDefinitions>
											<Grid.ColumnDefinitions>
												<!-- Left Margin -->
												<ColumnDefinition
													Width="60" />
												<!-- Left Row -->
												<ColumnDefinition
													Width="*" />
												<!-- Spacing -->
												<ColumnDefinition
													Width="50" />
											</Grid.ColumnDefinitions>
											<common:CustomImage
												Grid.Row="1"
												Grid.Column="0"
												HeightRequest="40"
												WidthRequest="40"
												HorizontalOptions="Center"
												VerticalOptions="Start"
												Source="{Binding PharmacyIcon}" />
											<StackLayout
												Grid.Row="1"
												Grid.Column="1"
												Padding="0"
												Spacing="0"
												Orientation="Vertical">
												<common:CustomLabel
													Text="{Binding Name}"
													TextColor="{x:Static resources:ColorResources.TextColorDark}"
													CustomFont="{x:Static resources:FontResources.RegularFont}"
													FontSize="14" />
												<common:CustomLabel
													Text="{Binding DistanceTxt}"
													TextColor="{x:Static resources:ColorResources.TextColorDark}"
													CustomFont="{x:Static resources:FontResources.RegularFont}"
													FontSize="12" />
												<common:CustomLabel
													IsVisible="{Binding IsOpen}"
													Text="{Binding OpenStatusTxt}"
													TextColor="{x:Static resources:ColorResources.LocatorGreenText}"
													CustomFont="{x:Static resources:FontResources.RegularFont}"
													FontSize="12" />
												<common:CustomLabel
													IsVisible="{Binding IsOpen, Converter={x:Static converters:ConverterResources.InverseBool}}"
													Text="{Binding OpenStatusTxt}"
													TextColor="{x:Static resources:ColorResources.TextColorDark}"
													CustomFont="{x:Static resources:FontResources.RegularFont}"
													FontSize="12" />
											</StackLayout>
											<common:CustomImage
												Grid.Row="1"
												Grid.Column="2"
												HeightRequest="10"
												WidthRequest="10"
												HorizontalOptions="Center"
												VerticalOptions="Center"
												Source="ic_button_arrow_black" />
										</Grid>
										<Grid
											HeightRequest="1"
											VerticalOptions="End"
											HorizontalOptions="FillAndExpand">
											<BoxView
												HorizontalOptions="FillAndExpand"
												HeightRequest="1"
												Color="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
										</Grid>
									</StackLayout>
								</ViewCell>
							</DataTemplate>
						</common:CustomListView.ItemTemplate>
					</common:CustomListView>
				</Grid>
				<!-- Pharmacies toggle -->
				<Grid
					Grid.Row="2"
					Grid.RowSpacing="0"
					HeightRequest="45"
					BackgroundColor="Transparent"
					HorizontalOptions="FillAndExpand"
					VerticalOptions="FillAndExpand">
					<ContentView.GestureRecognizers>
						<TapGestureRecognizer
							Tapped="PharmaciesToggleClick" />
					</ContentView.GestureRecognizers>
					<Grid.RowDefinitions>
						<RowDefinition
							Height="auto" />
						<RowDefinition
							Height="*" />
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition
							Width="*" />
						<ColumnDefinition
							Width="auto" />
						<ColumnDefinition
							Width="*" />
					</Grid.ColumnDefinitions>
					<!--<BoxView Grid.ColumnSpan="3"
						HeightRequest="1"
						BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}" />-->
					<common:CustomLabel
						Grid.Row="1"
						FontSize="13"
						HorizontalOptions="End"
						VerticalOptions="Center"
						Text="{x:Static app:AppResources.ServicePharmacyTitle}"
						CustomFont="{x:Static resources:FontResources.RegularFont}"
						TextColor="{x:Static resources:ColorResources.TextColorDark}" />
					<common:Toggler
						Grid.Row="1"
						Grid.Column="1"
						x:Name="BtnTogglerPharmacy"
						InputTransparent="True"
						HorizontalOptions="Center"
						VerticalOptions="Center"
						WidthRequest="46"
						HeightRequest="28" />
					<common:CustomLabel
						Grid.Row="1"
						Grid.Column="2"
						FontSize="13"
						HorizontalOptions="Start"
						VerticalOptions="Center"
						Text="{x:Static app:AppResources.AllPharmacyTitle}"
						CustomFont="{x:Static resources:FontResources.RegularFont}"
						TextColor="{x:Static resources:ColorResources.TextColorDark}" />
				</Grid>
			</Grid>
			<!-- Shadowbox -->
			<ContentView
				x:Name="Shadowbox"
				AbsoluteLayout.LayoutBounds="0, 0, 1.0, 1.0"
				AbsoluteLayout.LayoutFlags="All"
				IsVisible="false"
				Opacity="0.5"
				BackgroundColor="White">
				<!--<common:CustomActivityIndicator x:Name="ActivityIndicator"
		  			  IsRunning="True"
		  			  IsVisible="false"
		  			  VerticalOptions="CenterAndExpand"
		  			  HorizontalOptions="CenterAndExpand"/>-->
			</ContentView>
			<!-- Menus -->
			<Grid
				x:Name="MenuContainer"
				AbsoluteLayout.LayoutBounds="0, 0, 1.0, AutoSize"
				AbsoluteLayout.LayoutFlags="WidthProportional"
				RowSpacing="0"
				Padding="0">
				<Grid.RowDefinitions>
					<RowDefinition
						Height="auto"
						x:Name="RowOptHeight" />
				</Grid.RowDefinitions>
				<!--- Selected option -->
				<Grid
					Grid.Row="0"
					x:Name="MenuClosed"
					RowSpacing="1"
					HeightRequest="44"
					IsVisible="true">
					<Grid.RowDefinitions>
						<RowDefinition
							Height="44" />
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition
							Width="10" />
						<ColumnDefinition
							Width="*" />
						<ColumnDefinition
							Width="50" />
					</Grid.ColumnDefinitions>
					<StackLayout
						Grid.Row="0"
						Grid.ColumnSpan="3"
						Spacing="0">
						<BoxView
							HeightRequest="1"
							BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
						<Grid
							RowSpacing="0"
							ColumnSpacing="0">
							<Grid.RowDefinitions>
								<RowDefinition
									Height="40" />
							</Grid.RowDefinitions>
							<Grid.ColumnDefinitions>
								<ColumnDefinition
									Width="15" />
								<ColumnDefinition
									Width="*" />
								<ColumnDefinition
									Width="1" />
								<ColumnDefinition
									Width="50" />
							</Grid.ColumnDefinitions>
							<!--- Label -->
							<common:CustomLabel
								Grid.Column="1"
								x:Name="LblSelectedOption"
								Text="{x:Static app:AppResources.NearMeOption}"
								CustomFont="{x:Static resources:FontResources.RegularFont}"
								TextColor="{x:Static resources:ColorResources.TextColorDark}"
								FontSize="15"
								VerticalOptions="CenterAndExpand"
								HorizontalOptions="StartAndExpand" />
							<!--- ? -->
							<!--<BoxView Grid.Column="2"
								BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}" />-->
							<ContentView
								Grid.Column="3"
								VerticalOptions="FillAndExpand"
								HorizontalOptions="FillAndExpand">
								<common:CustomImage
									Source="arrow_black_down"
									WidthRequest="10"
									HeightRequest="10"
									VerticalOptions="Center"
									HorizontalOptions="Center" />
								<ContentView.GestureRecognizers>
									<TapGestureRecognizer
										Tapped="MenuAction" />
								</ContentView.GestureRecognizers>
							</ContentView>
						</Grid>
						<!--<BoxView
							HeightRequest="3"
							BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}" />-->
					</StackLayout>
				</Grid>
				<!-- Menu (expanded options) -->
				<StackLayout
					Grid.Row="0"
					x:Name="MenuExpanded"
					IsVisible="false"
					HeightRequest="264"
					BackgroundColor="{x:Static resources:ColorResources.LocatorBackgroundGrey}">
					<BoxView
						HeightRequest="1"
						BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
					<StackLayout
						Spacing="0"
						IsVisible="true"
						HorizontalOptions="FillAndExpand"
						HeightRequest="260"
						Orientation="Vertical">
						<common:CustomListView
							x:Name="ListOptions"
							HorizontalOptions="FillAndExpand"
							ItemsSource="{Binding MenuTexts}"
							HasUnevenRows="true">
							<common:CustomListView.ItemTemplate>
								<DataTemplate>
									<ViewCell>
										<Grid
											Padding="0">
											<Grid.RowDefinitions>
												<!-- MapSmall -->
												<RowDefinition
													Height="40" />
											</Grid.RowDefinitions>
											<Grid.ColumnDefinitions>
												<!-- Left Margin -->
												<ColumnDefinition
													Width="10" />
												<!-- Left Row -->
												<ColumnDefinition
													Width="*" />
											</Grid.ColumnDefinitions>
											<common:CustomLabel
												Grid.Row="0"
												Grid.Column="1"
												Text="{Binding Text}"
												CustomFont="{x:Static resources:FontResources.RegularFont}"
												TextColor="{x:Static resources:ColorResources.TextColorDark}"
												FontSize="14"
												HorizontalOptions="Start"
												VerticalOptions="Center" />
										</Grid>
									</ViewCell>
								</DataTemplate>
							</common:CustomListView.ItemTemplate>
						</common:CustomListView>
						<!-- Table footer (close table) -->
						<Grid
							x:Name="TableFooter"
							RowSpacing="1">
							<Grid.RowDefinitions>
								<RowDefinition
									Height="32" />
								<RowDefinition
									Height="3" />
							</Grid.RowDefinitions>
							<Grid.ColumnDefinitions>
								<ColumnDefinition
									Width="10" />
								<ColumnDefinition
									Width="*" />
								<ColumnDefinition
									Width="50" />
							</Grid.ColumnDefinitions>
							<ContentView
								Grid.Column="2"
								VerticalOptions="FillAndExpand"
								HorizontalOptions="FillAndExpand">
								<common:CustomImage
									Source="arrow_black_up"
									WidthRequest="10"
									HeightRequest="10"
									VerticalOptions="Center"
									HorizontalOptions="Center" />
								<ContentView.GestureRecognizers>
									<TapGestureRecognizer
										Tapped="MenuActionExpanded" />
								</ContentView.GestureRecognizers>
							</ContentView>
							<!--<BoxView Grid.Row="1" Grid.ColumnSpan="3"
								HeightRequest="3"
								BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}" />-->
						</Grid>
					</StackLayout>
				</StackLayout>
				<!-- Recent List (search options) -->
				<StackLayout
					Grid.Row="0"
					x:Name="SearchOptions"
					IsVisible="false"
					BackgroundColor="White"
					HeightRequest="120">
					<StackLayout
						x:Name="SearchHeader"
						Padding="0"
						HeightRequest="40"
						BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}"
						Orientation="Horizontal">
						<Label
							WidthRequest="20" />
						<common:CustomLabel
							x:Name="SearchHeaderTitle"
							CustomFont="{x:Static resources:FontResources.SemiBoldFont}"
							TextColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}"
							FontSize="15"
							CustomMargin="0"
							VerticalOptions="CenterAndExpand"
							HorizontalOptions="StartAndExpand" />
					</StackLayout>
					<common:CustomListView
						x:Name="RecentList"
						ItemsSource="{Binding RecentPharmacies}"
						HasUnevenRows="true">
						<common:CustomListView.ItemTemplate>
							<DataTemplate>
								<ViewCell>
									<Grid
										Padding="0">
										<Grid.RowDefinitions>
											<!-- ? -->
											<RowDefinition
												Height="40" />
										</Grid.RowDefinitions>
										<Grid.ColumnDefinitions>
											<!-- Left Margin -->
											<ColumnDefinition
												Width="10" />
											<!-- Left Row -->
											<ColumnDefinition
												Width="*" />
										</Grid.ColumnDefinitions>
										<common:CustomLabel
											Grid.Row="0"
											Grid.Column="1"
											Text="{Binding Text}"
											CustomFont="{x:Static resources:FontResources.SemiBoldFont}"
											TextColor="{x:Static resources:ColorResources.TextColorDark}"
											FontSize="14"
											HorizontalOptions="Start"
											VerticalOptions="Center" />
									</Grid>
								</ViewCell>
							</DataTemplate>
						</common:CustomListView.ItemTemplate>
					</common:CustomListView>
					<BoxView
						HeightRequest="3"
						BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
				</StackLayout>
			</Grid>
		</AbsoluteLayout>
		<!-- MenuItem -->
		<views:MenuView
			x:Name="MenuView"
			Grid.Row="1"
			Grid.RowSpan="2" />
		<!-- Application Bar -->
		<views:ApplicationBar
			x:Name="ApplicationBar"
			Grid.ColumnSpan="2" />
		<!-- Loading Container -->
		<Grid
			x:Name="LoadingView"
			Grid.RowSpan="3"
			Grid.ColumnSpan="2"
			IsVisible="False"
			VerticalOptions="FillAndExpand"
			HorizontalOptions="FillAndExpand"
			BackgroundColor="#7FFFFFFF">
			<!-- Loading Indicator -->
			<common:CustomActivityIndicator
				HorizontalOptions="Center"
				VerticalOptions="Center"
				IsRunning="True"
				Color="{x:Static resources:ColorResources.APPBackgroundDark}" />
		</Grid>
	</Grid>
</pages:ANFPage>
=======
﻿<?xml version="1.0" encoding="UTF-8"?>
<ANFPage
	xmlns="http://xamarin.com/schemas/2014/forms"
	xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
	xmlns:resources="clr-namespace:ANFAPP.Logic.Resources;assembly=ANFAPP.Logic"
	xmlns:common="clr-namespace:ANFAPP.Views.Common;assembly=ANFAPP"
	xmlns:views="clr-namespace:ANFAPP.Views;assembly=ANFAPP"
	xmlns:converters="clr-namespace:ANFAPP.Resources;assembly=ANFAPP"
	xmlns:app="clr-namespace:ANFAPP.Logic;assembly=ANFAPP.Logic"
	x:Class="ANFAPP.Pages.PharmacyLocator.LocatorMap">
	<Grid
		RowSpacing="0"
		ColumnSpacing="0"
		BackgroundColor="{x:Static resources:ColorResources.LocatorBackgroundGrey}">
		<Grid.RowDefinitions>
			<RowDefinition
				Height="auto" />
			<RowDefinition
				Height="auto" />
			<RowDefinition
				Height="*" />
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition
				Width="auto" />
			<ColumnDefinition
				Width="*" />
		</Grid.ColumnDefinitions>
		<!--- Search bar -->
		<Grid
			Grid.Row="1"
			Grid.Column="1"
			Grid.RowSpacing="0"
			Grid.ColumnSpacing="0">
			<Grid.RowDefinitions>
				<RowDefinition
					Height="50" />
			</Grid.RowDefinitions>
			<Grid.ColumnDefinitions>
				<ColumnDefinition
					Width="15" />
				<ColumnDefinition
					Width="*" />
				<ColumnDefinition
					Width="70" />
			</Grid.ColumnDefinitions>
			<!--- Textbox -->
			<ContentView
				Grid.Row="0"
				Grid.Column="1"
				x:Name="GridSearch"
				IsVisible="false">
				<common:CustomEntry
					x:Name="SearchEntry"
					VerticalOptions="CenterAndExpand"
					HorizontalOptions="FillAndExpand"
					FontSize="15"
					TextChanged="OnTextChanged"
					Completed="OnSearchEntryCompleted"
					CustomFont="{x:Static resources:FontResources.RegularFont}"
					TextColor="{x:Static resources:ColorResources.TextColorDark}"
					BackgroundColor="{x:Static resources:ColorResources.LocatorBackgroundGrey}" />
			</ContentView>
			<!--- Toggle map/list -->
			<StackLayout
				x:Name="GridSelection"
				Grid.Row="0"
				Grid.Column="1"
				IsVisible="true"
				Spacing="10"
				Orientation="Horizontal"
				HorizontalOptions="Start"
				BackgroundColor="Transparent"
				VerticalOptions="FillAndExpand">
				<ContentView.GestureRecognizers>
					<TapGestureRecognizer
						Tapped="TogglerViewTypeAction" />
				</ContentView.GestureRecognizers>
				<common:CustomLabel
					Text="{x:Static app:AppResources.MapSwitchOption}"
					YAlign="Center"
					VerticalOptions="Center"
					CustomFont="{x:Static resources:FontResources.RegularFont}"
					TextColor="{x:Static resources:ColorResources.TextColorDark}"
					FontSize="15" />
				<common:Toggler
					x:Name="BtnTogglerViewType"
					HorizontalOptions="Center"
					VerticalOptions="Center"
					InputTransparent="True"
					WidthRequest="46"
					HeightRequest="28" />
				<common:CustomLabel
					Text="{x:Static app:AppResources.RecentSwitchOption}"
					YAlign="Center"
					VerticalOptions="Center"
					CustomFont="{x:Static resources:FontResources.RegularFont}"
					TextColor="{x:Static resources:ColorResources.TextColorDark}"
					FontSize="15" />
			</StackLayout>
			<!-- Search Button/Image -->
			<ContentView
				Grid.Row="0"
				Grid.Column="2"
				Padding="0, 0, 15, 0"
				VerticalOptions="FillAndExpand"
				HorizontalOptions="FillAndExpand">
				<common:CustomImage
					x:Name="SearchBarButtonImage"
					Source="ic_product_mag_search"
					VerticalOptions="Center"
					HorizontalOptions="End" />
				<ContentView.GestureRecognizers>
					<TapGestureRecognizer
						Tapped="ActionSearch" />
				</ContentView.GestureRecognizers>
			</ContentView>
		</Grid>
		<!-- This wraps the menu overlays, the map/list and the toggle at the bottom. -->
		<AbsoluteLayout
			Grid.Row="2"
			Grid.Column="1"
			x:Name="Wrapper"
			VerticalOptions="FillAndExpand"
			HorizontalOptions="FillAndExpand">
			<!-- Map, List and Toggle -->
			<Grid
				AbsoluteLayout.LayoutBounds="0, 0, 1.0, 1.0"
				AbsoluteLayout.LayoutFlags="All"
				RowSpacing="0"
				Padding="0">
				<Grid.RowDefinitions>
					<RowDefinition
						Height="44" />
					<RowDefinition
						Height="*"
						x:Name="RowMapListHeight" />
					<RowDefinition
						Height="auto" />
				</Grid.RowDefinitions>
				<!--- Page body map -->
				<Grid
					Grid.Row="1"
					x:Name="MapView"
					IsVisible="true"
					HorizontalOptions="FillAndExpand"
					VerticalOptions="FillAndExpand">
					<common:NativeMap
						x:Name="PharmacyMap"
						HorizontalOptions="FillAndExpand"
						VerticalOptions="FillAndExpand" />
				</Grid>
				<!-- The first row should remain empty! -->
				<!--- Page body list-->
				<Grid
					Grid.Row="1"
					x:Name="PharmacyListContainer"
					IsVisible="false"
					BackgroundColor="White"
					VerticalOptions="FillAndExpand"
					RowSpacing="0">
					<Grid.RowDefinitions>
						<RowDefinition
							Height="Auto">
						</RowDefinition>
						<RowDefinition
							Height="Auto">
						</RowDefinition>
						<RowDefinition
							Height="1*">
						</RowDefinition>
					</Grid.RowDefinitions>
					<Grid
						Grid.Row="0"
						HorizontalOptions="FillAndExpand"
						x:Name="containerInServiceVsLongSchedule"
						MinimumHeightRequest="40"
						BackgroundColor="{x:Static resources:ColorResources.LocatorBackgroundGrey}"
						ColumnSpacing="0"
						RowSpacing="0"
						IsVisible="False"
						Padding="0">
						<Grid.RowDefinitions>
							<RowDefinition
								Height="40">
							</RowDefinition>
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition
								Width="*">
							</ColumnDefinition>
							<ColumnDefinition
								Width="*">
							</ColumnDefinition>
						</Grid.ColumnDefinitions>
						<common:CustomButton
							HorizontalOptions="FillAndExpand"
							FontSize="15"
							Grid.Row="0"
							Grid.Column="0"
							BorderRadius="0"
							Text="{x:Static app:AppResources.InService}"
							x:Name="btnShowInServicePharms"
							TextColor="{x:Static resources:ColorResources.TextColorDark}"
							CustomFont="{x:Static resources:FontResources.RegularFont}"
							BackgroundColor="White" />
						<common:CustomButton
							HorizontalOptions="FillAndExpand"
							FontSize="15"
							Grid.Row="0"
							Grid.Column="1"
							BorderRadius="0"
							Text="{x:Static app:AppResources.LongHourSchedule}"
							x:Name="btnShowLongSchedulePharms"
							TextColor="{x:Static resources:ColorResources.TextColorDark}"
							CustomFont="{x:Static resources:FontResources.RegularFont}"
							BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
					</Grid>
					<!-- No Data Label -->
					<common:CustomLabel
						Grid.Row="1"
						FontSize="15"
						XAlign="Center"
						VerticalOptions="Start"
						HorizontalOptions="Center"
						CustomMargin="0, 20"
						TextColor="{x:Static resources:ColorResources.TextColorDark}"
						CustomFont="{x:Static resources:FontResources.SemiBoldFont}"
						Text="{x:Static app:AppResources.LocatorMapEmptyListLabel}"
						IsVisible="{Binding ListHasItems, Converter={x:Static converters:ConverterResources.InverseBool}}" />
					<common:CustomListView
						x:Name="PharmacyList"
						
						ItemSelected="DidSelectPharmacyItem"
						SeparatorColor="White"
						Grid.Row="2"
						VerticalOptions="FillAndExpand"
						HasUnevenRows="True">
						<common:CustomListView.ItemTemplate>
							<DataTemplate>
								<ViewCell>
									<StackLayout
										Orientation="Vertical"
										Spacing="0">
										<Grid
											Padding="0"
											BackgroundColor="White">
											<Grid.RowDefinitions>
												<!-- Margin -->
												<RowDefinition
													Height="2" />
												<!-- ? -->
												<RowDefinition
													Height="auto" />
												<!-- Margin -->
												<RowDefinition
													Height="2" />
											</Grid.RowDefinitions>
											<Grid.ColumnDefinitions>
												<!-- Left Margin -->
												<ColumnDefinition
													Width="60" />
												<!-- Left Row -->
												<ColumnDefinition
													Width="*" />
												<!-- Spacing -->
												<ColumnDefinition
													Width="50" />
											</Grid.ColumnDefinitions>
											<common:CustomImage
												Grid.Row="1"
												Grid.Column="0"
												HeightRequest="40"
												WidthRequest="40"
												HorizontalOptions="Center"
												VerticalOptions="Start"
												Source="{Binding PharmacyIcon}" />
											<StackLayout
												Grid.Row="1"
												Grid.Column="1"
												Padding="0"
												Spacing="0"
												Orientation="Vertical">
												<common:CustomLabel
													Text="{Binding Name}"
													TextColor="{x:Static resources:ColorResources.TextColorDark}"
													CustomFont="{x:Static resources:FontResources.RegularFont}"
													FontSize="14" />
												<common:CustomLabel
													Text="{Binding DistanceTxt}"
													TextColor="{x:Static resources:ColorResources.TextColorDark}"
													CustomFont="{x:Static resources:FontResources.RegularFont}"
													FontSize="12" />
												<common:CustomLabel
													IsVisible="{Binding IsOpen}"
													Text="{Binding OpenStatusTxt}"
													TextColor="{x:Static resources:ColorResources.LocatorGreenText}"
													CustomFont="{x:Static resources:FontResources.RegularFont}"
													FontSize="12" />
												<common:CustomLabel
													x:Name="OpenStatusTxt"
													IsVisible="{Binding IsOpen, Converter={x:Static converters:ConverterResources.InverseBool}}"
													Text="{Binding OpenStatusTxt}"
													TextColor="{x:Static resources:ColorResources.TextColorDark}"
													CustomFont="{x:Static resources:FontResources.RegularFont}"
		
													FontSize="12" />
											</StackLayout>
											<common:CustomImage
												Grid.Row="1"
												Grid.Column="2"
												HeightRequest="10"
												WidthRequest="10"
												HorizontalOptions="Center"
												VerticalOptions="Center"
												Source="ic_button_arrow_black" />
										</Grid>
										<Grid
											HeightRequest="1"
											VerticalOptions="End"
											HorizontalOptions="FillAndExpand">
											<BoxView
												HorizontalOptions="FillAndExpand"
												HeightRequest="1"
												Color="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
										</Grid>
									</StackLayout>
								</ViewCell>
							</DataTemplate>
						</common:CustomListView.ItemTemplate>
					</common:CustomListView>
				</Grid>
				<!-- Pharmacies toggle -->
				<Grid
					Grid.Row="2"
					Grid.RowSpacing="0"
					HeightRequest="45"
					BackgroundColor="Transparent"
					HorizontalOptions="FillAndExpand"
					VerticalOptions="FillAndExpand">
					<ContentView.GestureRecognizers>
						<TapGestureRecognizer
							Tapped="PharmaciesToggleClick" />
					</ContentView.GestureRecognizers>
					<Grid.RowDefinitions>
						<RowDefinition
							Height="auto" />
						<RowDefinition
							Height="*" />
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition
							Width="*" />
						<ColumnDefinition
							Width="auto" />
						<ColumnDefinition
							Width="*" />
					</Grid.ColumnDefinitions>
					<!--<BoxView Grid.ColumnSpan="3"
						HeightRequest="1"
						BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}" />-->
					<common:CustomLabel
						Grid.Row="1"
						FontSize="13"
						HorizontalOptions="End"
						VerticalOptions="Center"
						Text="{x:Static app:AppResources.ServicePharmacyTitle}"
						CustomFont="{x:Static resources:FontResources.RegularFont}"
						TextColor="{x:Static resources:ColorResources.TextColorDark}" />
					<common:Toggler
						Grid.Row="1"
						Grid.Column="1"
						x:Name="BtnTogglerPharmacy"
						InputTransparent="True"
						HorizontalOptions="Center"
						VerticalOptions="Center"
						WidthRequest="46"
						HeightRequest="28" />
					<common:CustomLabel
						Grid.Row="1"
						Grid.Column="2"
						FontSize="13"
						HorizontalOptions="Start"
						VerticalOptions="Center"
						Text="{x:Static app:AppResources.AllPharmacyTitle}"
						CustomFont="{x:Static resources:FontResources.RegularFont}"
						TextColor="{x:Static resources:ColorResources.TextColorDark}" />
				</Grid>
			</Grid>
			<!-- Shadowbox -->
			<ContentView
				x:Name="Shadowbox"
				AbsoluteLayout.LayoutBounds="0, 0, 1.0, 1.0"
				AbsoluteLayout.LayoutFlags="All"
				IsVisible="false"
				Opacity="0.5"
				BackgroundColor="White">
				<!--<common:CustomActivityIndicator x:Name="ActivityIndicator"
		  			  IsRunning="True"
		  			  IsVisible="false"
		  			  VerticalOptions="CenterAndExpand"
		  			  HorizontalOptions="CenterAndExpand"/>-->
			</ContentView>
			<!-- Menus -->
			<Grid
				x:Name="MenuContainer"
				AbsoluteLayout.LayoutBounds="0, 0, 1.0, AutoSize"
				AbsoluteLayout.LayoutFlags="WidthProportional"
				RowSpacing="0"
				Padding="0">
				<Grid.RowDefinitions>
					<RowDefinition
						Height="auto"
						x:Name="RowOptHeight" />
				</Grid.RowDefinitions>
				<!--- Selected option -->
				<Grid
					Grid.Row="0"
					x:Name="MenuClosed"
					RowSpacing="1"
					HeightRequest="44"
					IsVisible="true">
					<Grid.RowDefinitions>
						<RowDefinition
							Height="44" />
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition
							Width="10" />
						<ColumnDefinition
							Width="*" />
						<ColumnDefinition
							Width="50" />
					</Grid.ColumnDefinitions>
					<StackLayout
						Grid.Row="0"
						Grid.ColumnSpan="3"
						Spacing="0">
						<BoxView
							HeightRequest="1"
							BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
						<Grid
							RowSpacing="0"
							ColumnSpacing="0">
							<Grid.RowDefinitions>
								<RowDefinition
									Height="40" />
							</Grid.RowDefinitions>
							<Grid.ColumnDefinitions>
								<ColumnDefinition
									Width="15" />
								<ColumnDefinition
									Width="*" />
								<ColumnDefinition
									Width="1" />
								<ColumnDefinition
									Width="50" />
							</Grid.ColumnDefinitions>
							<!--- Label -->
							<common:CustomLabel
								Grid.Column="1"
								x:Name="LblSelectedOption"
								Text="{x:Static app:AppResources.NearMeOption}"
								CustomFont="{x:Static resources:FontResources.RegularFont}"
								TextColor="{x:Static resources:ColorResources.TextColorDark}"
								FontSize="15"
								VerticalOptions="CenterAndExpand"
								HorizontalOptions="StartAndExpand" />
							<!--- ? -->
							<!--<BoxView Grid.Column="2"
								BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}" />-->
							<ContentView
								Grid.Column="3"
								VerticalOptions="FillAndExpand"
								HorizontalOptions="FillAndExpand">
								<common:CustomImage
									Source="arrow_black_down"
									WidthRequest="10"
									HeightRequest="10"
									VerticalOptions="Center"
									HorizontalOptions="Center" />
								<ContentView.GestureRecognizers>
									<TapGestureRecognizer
										Tapped="MenuAction" />
								</ContentView.GestureRecognizers>
							</ContentView>
						</Grid>
						<!--<BoxView
							HeightRequest="3"
							BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}" />-->
					</StackLayout>
				</Grid>
				<!-- Menu (expanded options) -->
				<StackLayout
					Grid.Row="0"
					x:Name="MenuExpanded"
					IsVisible="false"
					HeightRequest="264"
					BackgroundColor="{x:Static resources:ColorResources.LocatorBackgroundGrey}">
					<BoxView
						HeightRequest="1"
						BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
					<StackLayout
						Spacing="0"
						IsVisible="true"
						HorizontalOptions="FillAndExpand"
						HeightRequest="260"
						Orientation="Vertical">
						<common:CustomListView
							x:Name="ListOptions"
							HorizontalOptions="FillAndExpand"
							ItemsSource="{Binding MenuTexts}"
							HasUnevenRows="true">
							<common:CustomListView.ItemTemplate>
								<DataTemplate>
									<ViewCell>
										<Grid
											Padding="0">
											<Grid.RowDefinitions>
												<!-- MapSmall -->
												<RowDefinition
													Height="40" />
											</Grid.RowDefinitions>
											<Grid.ColumnDefinitions>
												<!-- Left Margin -->
												<ColumnDefinition
													Width="10" />
												<!-- Left Row -->
												<ColumnDefinition
													Width="*" />
											</Grid.ColumnDefinitions>
											<common:CustomLabel
												Grid.Row="0"
												Grid.Column="1"
												Text="{Binding Text}"
												CustomFont="{x:Static resources:FontResources.RegularFont}"
												TextColor="{x:Static resources:ColorResources.TextColorDark}"
												FontSize="14"
												HorizontalOptions="Start"
												VerticalOptions="Center" />
										</Grid>
									</ViewCell>
								</DataTemplate>
							</common:CustomListView.ItemTemplate>
						</common:CustomListView>
						<!-- Table footer (close table) -->
						<Grid
							x:Name="TableFooter"
							RowSpacing="1">
							<Grid.RowDefinitions>
								<RowDefinition
									Height="32" />
								<RowDefinition
									Height="3" />
							</Grid.RowDefinitions>
							<Grid.ColumnDefinitions>
								<ColumnDefinition
									Width="10" />
								<ColumnDefinition
									Width="*" />
								<ColumnDefinition
									Width="50" />
							</Grid.ColumnDefinitions>
							<ContentView
								Grid.Column="2"
								VerticalOptions="FillAndExpand"
								HorizontalOptions="FillAndExpand">
								<common:CustomImage
									Source="arrow_black_up"
									WidthRequest="10"
									HeightRequest="10"
									VerticalOptions="Center"
									HorizontalOptions="Center" />
								<ContentView.GestureRecognizers>
									<TapGestureRecognizer
										Tapped="MenuActionExpanded" />
								</ContentView.GestureRecognizers>
							</ContentView>
							<!--<BoxView Grid.Row="1" Grid.ColumnSpan="3"
								HeightRequest="3"
								BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}" />-->
						</Grid>
					</StackLayout>
				</StackLayout>
				<!-- Recent List (search options) -->
				<StackLayout
					Grid.Row="0"
					x:Name="SearchOptions"
					IsVisible="false"
					BackgroundColor="White"
					HeightRequest="120">
					<StackLayout
						x:Name="SearchHeader"
						Padding="0"
						HeightRequest="40"
						BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}"
						Orientation="Horizontal">
						<Label
							WidthRequest="20" />
						<common:CustomLabel
							x:Name="SearchHeaderTitle"
							CustomFont="{x:Static resources:FontResources.SemiBoldFont}"
							TextColor="{x:Static resources:ColorResources.LocatorSeparatorColorDark}"
							FontSize="15"
							CustomMargin="0"
							VerticalOptions="CenterAndExpand"
							HorizontalOptions="StartAndExpand" />
					</StackLayout>
					<common:CustomListView
						x:Name="RecentList"
						ItemsSource="{Binding RecentPharmacies}"
						HasUnevenRows="true">
						<common:CustomListView.ItemTemplate>
							<DataTemplate>
								<ViewCell>
									<Grid
										Padding="0">
										<Grid.RowDefinitions>
											<!-- ? -->
											<RowDefinition
												Height="40" />
										</Grid.RowDefinitions>
										<Grid.ColumnDefinitions>
											<!-- Left Margin -->
											<ColumnDefinition
												Width="10" />
											<!-- Left Row -->
											<ColumnDefinition
												Width="*" />
										</Grid.ColumnDefinitions>
										<common:CustomLabel
											Grid.Row="0"
											Grid.Column="1"
											Text="{Binding Text}"
											CustomFont="{x:Static resources:FontResources.SemiBoldFont}"
											TextColor="{x:Static resources:ColorResources.TextColorDark}"
											FontSize="14"
											HorizontalOptions="Start"
											VerticalOptions="Center" />
									</Grid>
								</ViewCell>
							</DataTemplate>
						</common:CustomListView.ItemTemplate>
					</common:CustomListView>
					<BoxView
						HeightRequest="3"
						BackgroundColor="{x:Static resources:ColorResources.LocatorSeparatorColorLight}" />
				</StackLayout>
			</Grid>
		</AbsoluteLayout>
		<!-- MenuItem -->
		<views:MenuView
			x:Name="MenuView"
			Grid.Row="1"
			Grid.RowSpan="2" />
		<!-- Application Bar -->
		<views:ApplicationBar
			x:Name="ApplicationBar"
			Grid.ColumnSpan="2" />
		<!-- Loading Container -->
		<Grid
			x:Name="LoadingView"
			Grid.RowSpan="3"
			Grid.ColumnSpan="2"
			IsVisible="False"
			VerticalOptions="FillAndExpand"
			HorizontalOptions="FillAndExpand"
			BackgroundColor="#7FFFFFFF">
			<!-- Loading Indicator -->
			<common:CustomActivityIndicator
				HorizontalOptions="Center"
				VerticalOptions="Center"
				IsRunning="True"
				Color="{x:Static resources:ColorResources.APPBackgroundDark}" />
		</Grid>
	</Grid>
</ANFPage>
>>>>>>> maintenance_phase5_azure_notification
